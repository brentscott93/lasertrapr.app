<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Clean and Process | Documentation for {lasertrapr}</title>
  <meta name="description" content="Documentation for using the lasertrapr app" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Clean and Process | Documentation for {lasertrapr}" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Documentation for using the lasertrapr app" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Clean and Process | Documentation for {lasertrapr}" />
  
  <meta name="twitter:description" content="Documentation for using the lasertrapr app" />
  

<meta name="author" content="Brent Scott" />


<meta name="date" content="2022-02-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="upload.html"/>
<link rel="next" href="analyzers.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://lasertrapr.app"> lasertrapr.app </a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#install-r-rstudio"><i class="fa fa-check"></i><b>1.1</b> Install R &amp; RStudio</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#download-lasertrapr"><i class="fa fa-check"></i><b>1.2</b> Download <strong>{lasertrapr}</strong></a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#launch-the-app"><i class="fa fa-check"></i><b>1.3</b> Launch the App</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="upload.html"><a href="upload.html"><i class="fa fa-check"></i><b>2</b> Upload Data</a>
<ul>
<li class="chapter" data-level="2.1" data-path="upload.html"><a href="upload.html#the-lasertrapr-folder"><i class="fa fa-check"></i><b>2.1</b> The ~/lasertrapr/ folder</a></li>
<li class="chapter" data-level="2.2" data-path="upload.html"><a href="upload.html#create-folders"><i class="fa fa-check"></i><b>2.2</b> Create Folders</a></li>
<li class="chapter" data-level="2.3" data-path="upload.html"><a href="upload.html#load-data"><i class="fa fa-check"></i><b>2.3</b> Load Data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="upload.html"><a href="upload.html#simple-upload"><i class="fa fa-check"></i><b>2.3.1</b> Simple Upload</a></li>
<li class="chapter" data-level="2.3.2" data-path="upload.html"><a href="upload.html#split-observations"><i class="fa fa-check"></i><b>2.3.2</b> Split Observations</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="upload.html"><a href="upload.html#tldr"><i class="fa fa-check"></i><b>2.4</b> tl;dr</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="clean-and-process.html"><a href="clean-and-process.html"><i class="fa fa-check"></i><b>3</b> Clean and Process</a>
<ul>
<li class="chapter" data-level="3.1" data-path="clean-and-process.html"><a href="clean-and-process.html#clean"><i class="fa fa-check"></i><b>3.1</b> Clean</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="clean-and-process.html"><a href="clean-and-process.html#cut-data"><i class="fa fa-check"></i><b>3.1.1</b> Cut data</a></li>
<li class="chapter" data-level="3.1.2" data-path="clean-and-process.html"><a href="clean-and-process.html#move-data"><i class="fa fa-check"></i><b>3.1.2</b> Move data</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="clean-and-process.html"><a href="clean-and-process.html#process"><i class="fa fa-check"></i><b>3.2</b> Process</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="clean-and-process.html"><a href="clean-and-process.html#convert-to-nm"><i class="fa fa-check"></i><b>3.2.1</b> Convert to nm</a></li>
<li class="chapter" data-level="3.2.2" data-path="clean-and-process.html"><a href="clean-and-process.html#remove-baseline"><i class="fa fa-check"></i><b>3.2.2</b> Remove baseline</a></li>
<li class="chapter" data-level="3.2.3" data-path="clean-and-process.html"><a href="clean-and-process.html#detrend-data"><i class="fa fa-check"></i><b>3.2.3</b> Detrend data</a></li>
<li class="chapter" data-level="3.2.4" data-path="clean-and-process.html"><a href="clean-and-process.html#to-include-or-not-to-include"><i class="fa fa-check"></i><b>3.2.4</b> To Include, or not to Include…</a></li>
<li class="chapter" data-level="3.2.5" data-path="clean-and-process.html"><a href="clean-and-process.html#save"><i class="fa fa-check"></i><b>3.2.5</b> Save!</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyzers.html"><a href="analyzers.html"><i class="fa fa-check"></i><b>4</b> Analyzers</a>
<ul>
<li class="chapter" data-level="4.1" data-path="analyzers.html"><a href="analyzers.html#hm-modelchangepoint"><i class="fa fa-check"></i><b>4.1</b> HM-Model/Changepoint</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="analyzers.html"><a href="analyzers.html#options-hm-model"><i class="fa fa-check"></i><b>4.1.1</b> Options: HM-Model</a></li>
<li class="chapter" data-level="4.1.2" data-path="analyzers.html"><a href="analyzers.html#options-changepoint"><i class="fa fa-check"></i><b>4.1.2</b> Options: Changepoint</a></li>
<li class="chapter" data-level="4.1.3" data-path="analyzers.html"><a href="analyzers.html#options-displacements"><i class="fa fa-check"></i><b>4.1.3</b> Options: Displacements</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="analyzers.html"><a href="analyzers.html#mini-ensemble"><i class="fa fa-check"></i><b>4.2</b> Mini-Ensemble</a></li>
<li class="chapter" data-level="4.3" data-path="analyzers.html"><a href="analyzers.html#tldr-1"><i class="fa fa-check"></i><b>4.3</b> tl;dr</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ensemble-average.html"><a href="ensemble-average.html"><i class="fa fa-check"></i><b>5</b> Ensemble Average</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ensemble-average.html"><a href="ensemble-average.html#prep-ensembles"><i class="fa fa-check"></i><b>5.1</b> Prep Ensembles</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="ensemble-average.html"><a href="ensemble-average.html#extending-forward"><i class="fa fa-check"></i><b>5.1.1</b> Extending Forward</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="ensemble-average.html"><a href="ensemble-average.html#extending-backwards"><i class="fa fa-check"></i><b>5.2</b> Extending Backwards</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="summarize.html"><a href="summarize.html"><i class="fa fa-check"></i><b>6</b> Summarize</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Documentation for <strong>{lasertrapr}</strong></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="clean-and-process" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Clean and Process</h1>
<div id="clean" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Clean</h2>
<p>Cleaning data <em>use</em> to be a painful and tedious task for me. It use to involve visualizing data traces in one software (pCLAMP), while jotting down notes in spreadsheets with specific time-stamps and then needing to convert time (in seconds) back to the original sampling frequency so I could go and manually find that data in excel to select/delete by hand (UGH! - I still cringe thinking of doing this…). Sometimes it still amazes me how much faster and easier this is with <code>{lasertrapr}</code>. The benefit of <code>{lasertrapr}</code> is even if you do not like/need the analyzers or other feutures you can easily just use it to clean, process, and export your data.</p>
<div id="cut-data" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Cut data</h3>
<p>The most common use case for needing to cut data from a trap data trace is when during collection an actin-filament snaps or the myosin sticks down. In these cases, there is still good/usable data present in the trace, but the presence of the large signal disruptions caused by the snapping filament or stick-down could throw off the analyzers. The easiest fix is to cut these portion of the data out. I generally do <strong>not</strong> recommend deleting data except for these cases in which case I refer to this as “trimming” the data.</p>
<p>Trimming (deleting) an observation to make it analyzer ready is easy with <code>{lasertrapr}</code>. Use the <strong>Folder Manager</strong> to select an observation, load the observation, select the data to delete, and hit the Cut button. <em>NOTE: This permanently deletes the range of data selected from the trap trace and is irreversible (unless you re-upload your data).</em></p>
<video width="800" height="400" controls>
<source src="images/cut.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
<div id="move-data" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Move data</h3>
<p>In some cases, you do not want to delete data, but to split one record into 2 different observations. This is called “moving” data in <code>{lasertrapr}</code>. Sometimes, during collection stage drift occurs so the trace starts with a stable/horizontal time-series, but then over time the data starts to trend with time upwards in the y-dimensions turning the signal into a diagonal line. One way to deal with this is to split the single <strong>obs</strong> into two seperate ones so the two-halves can be processed separately with the diagonal potion getting detrended later.</p>
<p>Moving data is the same procedure as cutting data, except for the final button pushed! Load an <strong>obs</strong>, select the data to move, and click move. A new observation folder will be made with the selected data and the selected data will be deleted out of the current <strong>obs</strong>. <em>NOTE: This cannot be undone without manual intervention (you would have to load the trap-data.csv files into R and <code>rbind</code> them back together or re-upload the data and start again).</em>
<video width="800" height="400" controls>
<source src="images/move.mp4" type="video/mp4">
Your browser does not support the video tag.
</video></p>
</div>
</div>
<div id="process" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Process</h2>
<p>Another benefit that I have enjoyed while analyzing my own data with <code>{lasertrapr}</code> is the ability to easily visualize how processing will transform my data before deciding to save/analyze it. Currently, you can convert data from mV-to-nm with a pre-determined user conversion value, center the baseline mean to zero using either the “baseline range” or “remove mv” techniques, or you can detrend your data with a peice-wise linear detrend-er.</p>
<div id="convert-to-nm" class="section level3" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Convert to nm</h3>
<p>Short and sweet. Enter your pre-determined mV-to-nm conversion in the <strong>Step Cal</strong> box and hit <strong>Graph</strong> to preview.</p>
<video width="800" height="400" controls>
<source src="images/nm.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
<div id="remove-baseline" class="section level3" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Remove baseline</h3>
<p>When collecting laser trap data the detector is measuring the relative intensity of light across its four-quadrants. The data is saved in units of millivolts (mV) and is usually not centered around 0mV. So, when the data is converted to nanometers the y-axis range becomes some arbitrarily large or nonsense negative value. Technically there is nothing wrong with this since we are interested in making <em>relative</em> measurements of displacements from baseline, but it makes more sense and is easier to read when the y-axis is centered around 0nm. This can be accomplished by calculating the average position of the baseline signal and subtracting that value from every point in the y-dimension. Baseline removal is currently implmented in 3 ways: baseline range, remove MV, and detrending the data.</p>
<div id="range" class="section level4" number="3.2.2.1">
<h4><span class="header-section-number">3.2.2.1</span> Range</h4>
<p>The baseline range is simplest and the most “legacy” (i.e. this was easiest for me to implement when I was doing this all manually before <code>{lasertrapr}</code>). You can manually select a quiescient perioed of data that represents the baseline signal and they mean position of this period of data will be calculated. By selecting <strong>remove base</strong> from the <strong>Graph Options</strong> and hitting <strong>Graph</strong> to update the app will provide a preview. *NOTE: this will not be saved until you explicitly hit save.”</p>
<video width="800" height="400" controls>
<source src="images/remove-baseline.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
<div id="remove-mv" class="section level4" number="3.2.2.2">
<h4><span class="header-section-number">3.2.2.2</span> Remove MV</h4>
<p>Sometimes it can be tricky to find a nice quiescent period of baseline signal to calcualte the range. This is expecially the case with fast motors and mini-ensemble experiments. Instead it can be helpful to use the <strong>Remove MV</strong> option. This will perform a Mean-Variance transformation of the entire data trace and show the plot in an interactive window. You can then select the area that represents the baseline population, the mean is calculated, and by selecting <strong>Remove MV</strong> in <strong>Graph Options</strong> and hitting <strong>Graph</strong> to update, the app will provide a preview. *NOTE: this will not be saved until you explicitly hit save.”</p>
<video width="800" height="400" controls>
<source src="images/remove-mv.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
</div>
<div id="detrend-data" class="section level3" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Detrend data</h3>
<video width="800" height="400" controls>
<source src="images/remove-mv.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
<div id="to-include-or-not-to-include" class="section level3" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> To Include, or not to Include…</h3>
<p>I do not like deleting data, but I also do not like wasting my time. Unfortunately, not all that glitters is gold, or not all trap data that is collected is usable. If I <strong>know</strong> that data does not look like exceptional signal-to-noise, there are no events, or will probably not analyze well I want to exclude those events from analysis so they do not take time getting analyzed etc.</p>
<p>By default, <code>{lasertrapr}</code> excludes all data from analysis so you need to <strong>Include</strong> the data for the app to analyze it.</p>
<p>If you like the data check the <strong>Include</strong> button when saving data.</p>
<video width="800" height="400" controls>
<source src="images/save-processed-data.mp4" type="video/mp4">
<p>Your browser does not support the video tag.
</video></p>
</div>
<div id="save" class="section level3" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Save!</h3>
<p><em>NOTE: The app will not save anything unless you save the changes!</em></p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="upload.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="analyzers.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["lasertrapr-documentation.pdf", "lasertrapr-documentation.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
